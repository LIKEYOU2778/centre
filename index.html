<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura Netease Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        /* 玻璃拟态效果 */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* 动态背景动画 */
        .animate-blob { animation: blob 7s infinite; }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
    </style>
</head>
<body class="bg-black text-white h-screen w-screen overflow-hidden flex flex-col items-center justify-center relative">

    <!-- 动态背景光斑 -->
    <div class="absolute top-0 -left-4 w-72 h-72 bg-purple-500 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"></div>
    <div class="absolute top-0 -right-4 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"></div>
    <div class="absolute -bottom-8 left-20 w-72 h-72 bg-pink-500 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"></div>

    <!-- 主容器 -->
    <div class="z-10 w-full max-w-2xl px-4 flex flex-col items-center gap-6">
        
        <!-- 标题 -->
        <h1 class="text-3xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-blue-500 mb-4 tracking-tight">
            Aura Cloud
        </h1>

        <!-- 输入区域 -->
        <div class="w-full glass rounded-2xl p-2 flex items-center shadow-2xl transition-all duration-300 focus-within:ring-2 focus-within:ring-blue-500/50">
            <i class="bi bi-link-45deg text-2xl text-gray-400 ml-3"></i>
            <input 
                type="text" 
                id="url-input" 
                placeholder="粘贴网易云 歌单/单曲 链接..." 
                class="bg-transparent border-none outline-none text-white text-base w-full px-4 py-3 placeholder-gray-500"
                onkeydown="if(event.key === 'Enter') loadPlayer()"
            >
            <button onclick="loadPlayer()" class="bg-blue-600 hover:bg-blue-700 text-white rounded-xl px-6 py-3 font-medium transition-colors">
                播放
            </button>
        </div>

        <!-- 播放器嵌入区 -->
        <div id="player-container" class="w-full h-0 opacity-0 overflow-hidden transition-all duration-700 ease-out rounded-xl shadow-2xl border border-white/5 relative">
            <!-- 播放器将在这里生成 -->
            <p class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-gray-500">
                等待加载...
            </p>
        </div>

        <!-- 历史记录/提示 -->
        <div class="text-gray-500 text-sm mt-4 text-center">
            <p>支持格式示例：</p>
            <p class="text-xs font-mono mt-1 opacity-60">https://music.163.com/#/playlist?id=123456</p>
            <p class="text-xs font-mono opacity-60">分享链接 -> 复制链接</p>
        </div>

    </div>

    <script>
        function loadPlayer() {
            const input = document.getElementById('url-input').value.trim();
            const container = document.getElementById('player-container');
            
            if (!input) {
                alert("请输入链接");
                return;
            }

            // 1. 提取 ID 和 类型
            let id = null;
            let type = 0; // 0: 单曲, 1: 歌单 (网易云iframe参数: 2为单曲, 0为歌单, 这里需要转换)

            // 尝试匹配 id=xxxx
            const idMatch = input.match(/id=(\d+)/);
            if (idMatch) {
                id = idMatch[1];
            } else {
                // 尝试匹配 /song/xxxx 或 /playlist/xxxx
                const pathMatch = input.match(/\/(song|playlist)\/(\d+)/);
                if (pathMatch) {
                    id = pathMatch[2];
                    if (pathMatch[1] === 'song') type = 2; // 单曲
                    if (pathMatch[1] === 'playlist') type = 0; // 歌单
                }
            }

            // 如果还没确定类型，根据 URL 关键词猜测
            if (id && type === 0) { // 默认初始值
                if (input.includes('song')) type = 2;
                else if (input.includes('playlist')) type = 0;
                else if (input.includes('album')) type = 1; // 专辑
            }

            if (!id) {
                alert("无法识别链接中的 ID，请直接复制网易云的网页链接");
                return;
            }

            // 2. 展开容器动画
            // 网易云外链播放器高度：单曲=66 (实际上设86比较稳), 歌单=430
            const height = (type === 2) ? 86 : 450; 
            container.style.height = height + 'px';
            container.style.opacity = '1';

            // 3. 生成 iframe
            // auto=1 表示自动播放，height 要和 style 对应
            // 官方参数: type -> 2:单曲, 1:专辑, 0:歌单
            // 注意：网易云部分版权歌曲不支持外链播放
            
            setTimeout(() => {
                container.innerHTML = `
                    <iframe 
                        frameborder="no" 
                        border="0" 
                        marginwidth="0" 
                        marginheight="0" 
                        width="100%" 
                        height="${height}" 
                        src="//music.163.com/outchain/player?type=${type}&id=${id}&auto=1&height=${(type===2)?66:430}">
                    </iframe>
                `;
            }, 300); // 等容器展开一点再加载
        }
    </script>
</body>
</html>
